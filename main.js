const translations = {
  en: {
    tagline: "SWEETS ON THE GO",
    order_now: "Order Now",
    about_title: "Made with Love",
    about_desc: "BISHCAKE offers delicious cakes and custom treats made with loveâ€”perfect for any occasion or sweet craving.",
    treats_title: "Our Treats",
    order_form_title: "Place Your Order",
    form_treat: "Treat",
    form_quantity: "Quantity",
    form_date: "Pickup Date",
    form_name: "Name",
    form_note: "Optional Note",
    form_submit: "Send to WhatsApp",
    order_button: "Order",
    whatsapp_greeting: "Hello, Iâ€™d like to order:",
    whatsapp_qty: "Qty",
    whatsapp_pickup: "Pickup Date",
    whatsapp_name: "Name",
    whatsapp_note: "Note",
  },
  ru: {
    tagline: "Ð¡Ð›ÐÐ”ÐžÐ¡Ð¢Ð˜ ÐÐ Ð’Ð«ÐÐžÐ¡",
    order_now: "Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÐµÐ¹Ñ‡Ð°Ñ",
    about_title: "Ð¡Ð´ÐµÐ»Ð°Ð½Ð¾ Ñ Ð»ÑŽÐ±Ð¾Ð²ÑŒÑŽ",
    about_desc: "BISHCAKE Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÑ‚ Ð²ÐºÑƒÑÐ½Ñ‹Ðµ Ñ‚Ð¾Ñ€Ñ‚Ñ‹ Ð¸ Ð´ÐµÑÐµÑ€Ñ‚Ñ‹ Ð½Ð° Ð·Ð°ÐºÐ°Ð·, ÑÐ´ÐµÐ»Ð°Ð½Ð½Ñ‹Ðµ Ñ Ð»ÑŽÐ±Ð¾Ð²ÑŒÑŽ â€” Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð»ÑŽÐ±Ð¾Ð³Ð¾ ÑÐ»ÑƒÑ‡Ð°Ñ Ð¸Ð»Ð¸ ÑÐ»Ð°Ð´ÐºÐ¾Ð³Ð¾ Ð¶ÐµÐ»Ð°Ð½Ð¸Ñ.",
    treats_title: "ÐÐ°ÑˆÐ¸ Ð´ÐµÑÐµÑ€Ñ‚Ñ‹",
    order_form_title: "ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·",
    form_treat: "Ð”ÐµÑÐµÑ€Ñ‚",
    form_quantity: "ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾",
    form_date: "Ð”Ð°Ñ‚Ð° ÑÐ°Ð¼Ð¾Ð²Ñ‹Ð²Ð¾Ð·Ð°",
    form_name: "Ð˜Ð¼Ñ",
    form_note: "ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ (Ð¿Ð¾ Ð¶ÐµÐ»Ð°Ð½Ð¸ÑŽ)",
    form_submit: "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð² WhatsApp",
    order_button: "Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ",
    whatsapp_greeting: "Ð—Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ, Ñ Ñ…Ð¾Ñ‚ÐµÐ»(Ð°) Ð±Ñ‹ Ð·Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ:",
    whatsapp_qty: "ÐšÐ¾Ð»-Ð²Ð¾",
    whatsapp_pickup: "Ð”Ð°Ñ‚Ð° ÑÐ°Ð¼Ð¾Ð²Ñ‹Ð²Ð¾Ð·Ð°",
    whatsapp_name: "Ð˜Ð¼Ñ",
    whatsapp_note: "ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ",
  },
  kg: {
    tagline: "Ð¢ÐÐ¢Ð¢Ð£Ð£Ð›ÐÐ Ð”Ð« ÐÐ›Ð ÐšÐ•Ð¢Ð˜Ò¢Ð˜Ð—",
    order_now: "ÐÐ·Ñ‹Ñ€ Ð±ÑƒÐ¹Ñ€ÑƒÑ‚Ð¼Ð°",
    about_title: "Ð¡Ò¯Ð¹Ò¯Ò¯ Ð¼ÐµÐ½ÐµÐ½ Ð¶Ð°ÑÐ°Ð»Ð³Ð°Ð½",
    about_desc: "BISHCAKE Ð°Ñ€ ÐºÐ°Ð½Ð´Ð°Ð¹ ÑƒÑ‡ÑƒÑ€Ð³Ð° Ð¶Ðµ Ñ‚Ð°Ñ‚Ñ‚ÑƒÑƒ ÐºÐ°Ð°Ð»Ð¾Ð¾Ð»Ð¾Ñ€Ð³Ð¾ Ñ‹Ð»Ð°Ð¹Ñ‹ÐºÑ‚ÑƒÑƒ, ÑÒ¯Ð¹Ò¯Ò¯ Ð¼ÐµÐ½ÐµÐ½ Ð¶Ð°ÑÐ°Ð»Ð³Ð°Ð½ Ð´Ð°Ð°Ð¼Ð´ÑƒÑƒ Ñ‚Ð¾Ñ€Ñ‚Ñ‚Ð¾Ñ€Ð´Ñƒ Ð¶Ð°Ð½Ð° Ð°Ñ‚Ð°Ð¹Ñ‹Ð½ Ñ‚Ð°Ñ‚Ñ‚ÑƒÑƒÐ»Ð°Ñ€Ð´Ñ‹ ÑÑƒÐ½ÑƒÑˆÑ‚Ð°Ð¹Ñ‚.",
    treats_title: "Ð‘Ð¸Ð·Ð´Ð¸Ð½ Ñ‚Ð°Ñ‚Ñ‚ÑƒÑƒÐ»Ð°Ñ€",
    order_form_title: "Ð‘ÑƒÐ¹Ñ€ÑƒÑ‚Ð¼Ð° Ð±ÐµÑ€Ò¯Ò¯",
    form_treat: "Ð¢Ð°Ñ‚Ñ‚ÑƒÑƒ",
    form_quantity: "Ð¡Ð°Ð½Ñ‹",
    form_date: "ÐÐ»Ñ‹Ð¿ ÐºÐµÑ‚Ò¯Ò¯ ÐºÒ¯Ð½Ò¯",
    form_name: "ÐÑ‚Ñ‹",
    form_note: "ÐšÐ¾ÑˆÑƒÐ¼Ñ‡Ð° ÑÑÐºÐµÑ€Ñ‚Ò¯Ò¯",
    form_submit: "WhatsApp'ÐºÐ° Ð¶Ó©Ð½Ó©Ñ‚Ò¯Ò¯",
    order_button: "Ð‘ÑƒÐ¹Ñ€ÑƒÑ‚Ð¼Ð°",
    whatsapp_greeting: "Ð¡Ð°Ð»Ð°Ð¼Ð°Ñ‚ÑÑ‹Ð·Ð±Ñ‹, Ð¼ÐµÐ½ Ð±ÑƒÐ¹Ñ€ÑƒÑ‚Ð¼Ð° Ð±ÐµÑ€Ð³Ð¸Ð¼ ÐºÐµÐ»ÐµÑ‚:",
    whatsapp_qty: "Ð¡Ð°Ð½Ñ‹",
    whatsapp_pickup: "ÐÐ»Ñ‹Ð¿ ÐºÐµÑ‚Ò¯Ò¯ ÐºÒ¯Ð½Ò¯",
    whatsapp_name: "ÐÑ‚Ñ‹",
    whatsapp_note: "Ð­ÑÐºÐµÑ€Ñ‚Ò¯Ò¯",
  }
};

const treats = {
  en: [
    {
      id: 'lemon-pound-cake',
      name: 'Iced Lemon Pound Cake',
      desc: 'Tangy and sweet, with a zesty lemon glaze',
      img: 'assets/lemonCake.png'
    },
    {
      id: 'puto-seko',
      name: 'Puto Seko',
      desc: 'Light, crumbly Filipino butter cookies',
      img: 'assets/PutoSeko.png'
    },
    {
      id: 'carrot-cake',
      name: 'Carrot Cake',
      desc: 'Moist cake with grated carrots and spices',
      img: 'assets/carrotCake.png'
    },
    {
      id: 'banana-nut-cake',
      name: 'Banana Nut Cake',
      desc: 'Soft banana sponge with roasted walnuts',
      img: 'assets/bananaBread.png'
    },
    {
      id: 'banana-nut-cupcakes',
      name: 'Banana Nut Cupcakes',
      desc: 'Mini banana cakes packed with chopped nuts',
      img: 'assets/bananaMuffinds.png'
    }
  ],
  ru: [
    { id: 'lemon-pound-cake', name: 'Ð›Ð¸Ð¼Ð¾Ð½Ð½Ñ‹Ð¹ ÐºÐµÐºÑ Ñ Ð³Ð»Ð°Ð·ÑƒÑ€ÑŒÑŽ', desc: 'Ð¢ÐµÑ€Ð¿ÐºÐ¸Ð¹ Ð¸ ÑÐ»Ð°Ð´ÐºÐ¸Ð¹, Ñ Ð¿Ð¸ÐºÐ°Ð½Ñ‚Ð½Ð¾Ð¹ Ð»Ð¸Ð¼Ð¾Ð½Ð½Ð¾Ð¹ Ð³Ð»Ð°Ð·ÑƒÑ€ÑŒÑŽ' },
    { id: 'puto-seko', name: 'ÐŸÑƒÑ‚Ð¾ Ð¡ÐµÐºÐ¾', desc: 'Ð›ÐµÐ³ÐºÐ¾Ðµ, Ñ€Ð°ÑÑÑ‹Ð¿Ñ‡Ð°Ñ‚Ð¾Ðµ Ñ„Ð¸Ð»Ð¸Ð¿Ð¿Ð¸Ð½ÑÐºÐ¾Ðµ Ð¿ÐµÑ‡ÐµÐ½ÑŒÐµ' },
    { id: 'carrot-cake', name: 'ÐœÐ¾Ñ€ÐºÐ¾Ð²Ð½Ñ‹Ð¹ Ñ‚Ð¾Ñ€Ñ‚', desc: 'Ð’Ð»Ð°Ð¶Ð½Ñ‹Ð¹ Ñ‚Ð¾Ñ€Ñ‚ Ñ Ñ‚ÐµÑ€Ñ‚Ð¾Ð¹ Ð¼Ð¾Ñ€ÐºÐ¾Ð²ÑŒÑŽ Ð¸ ÑÐ¿ÐµÑ†Ð¸ÑÐ¼Ð¸' },
    { id: 'banana-nut-cake', name: 'Ð‘Ð°Ð½Ð°Ð½Ð¾Ð²Ð¾-Ð¾Ñ€ÐµÑ…Ð¾Ð²Ñ‹Ð¹ Ñ‚Ð¾Ñ€Ñ‚', desc: 'ÐœÑÐ³ÐºÐ¸Ð¹ Ð±Ð°Ð½Ð°Ð½Ð¾Ð²Ñ‹Ð¹ Ð±Ð¸ÑÐºÐ²Ð¸Ñ‚ Ñ Ð¶Ð°Ñ€ÐµÐ½Ñ‹Ð¼Ð¸ Ð³Ñ€ÐµÑ†ÐºÐ¸Ð¼Ð¸ Ð¾Ñ€ÐµÑ…Ð°Ð¼Ð¸' },
    { id: 'banana-nut-cupcakes', name: 'Ð‘Ð°Ð½Ð°Ð½Ð¾Ð²Ð¾-Ð¾Ñ€ÐµÑ…Ð¾Ð²Ñ‹Ðµ ÐºÐµÐºÑÑ‹', desc: 'ÐœÐ¸Ð½Ð¸-ÐºÐµÐºÑÑ‹ Ñ Ð±Ð°Ð½Ð°Ð½Ð¾Ð¼ Ð¸ Ñ€ÑƒÐ±Ð»ÐµÐ½Ñ‹Ð¼Ð¸ Ð¾Ñ€ÐµÑ…Ð°Ð¼Ð¸' }
  ],
  kg: [
    { id: 'lemon-pound-cake', name: 'ÐœÑƒÐ· Ð¼ÐµÐ½ÐµÐ½ Ð»Ð¸Ð¼Ð¾Ð½ ÐºÐµÐºÑ', desc: 'ÐšÑ‹Ñ‡ÐºÑ‹Ð» Ð¶Ð°Ð½Ð° Ñ‚Ð°Ñ‚Ñ‚ÑƒÑƒ, Ð»Ð¸Ð¼Ð¾Ð½ Ð³Ð»Ð°Ð·ÑƒÑ€Ñƒ Ð¼ÐµÐ½ÐµÐ½' },
    { id: 'puto-seko', name: 'ÐŸÑƒÑ‚Ð¾ Ð¡ÐµÐºÐ¾', desc: 'Ð–ÐµÒ£Ð¸Ð», Ð¼Ð°Ð¹Ð´Ð°Ð»Ð°Ð½Ð³Ð°Ð½ Ñ„Ð¸Ð»Ð¸Ð¿Ð¿Ð¸Ð½Ð´Ð¸Ðº Ð¼Ð°Ð¹ Ð¿ÐµÑ‡ÐµÐ½ÑŒÐµÑÐ¸' },
    { id: 'carrot-cake', name: 'Ð¡Ð°Ð±Ð¸Ð· Ñ‚Ð¾Ñ€Ñ‚', desc: 'ÐœÐ°Ð¹Ð´Ð°Ð»Ð°Ð½Ð³Ð°Ð½ ÑÐ°Ð±Ð¸Ð· Ð¶Ð°Ð½Ð° Ñ‚Ð°Ñ‚Ñ‹Ð¼Ð°Ð»Ð´Ð°Ñ€ ÐºÐ¾ÑˆÑƒÐ»Ð³Ð°Ð½ Ð½Ñ‹Ð¼Ð´ÑƒÑƒ Ñ‚Ð¾Ñ€Ñ‚' },
    { id: 'banana-nut-cake', name: 'Ð‘Ð°Ð½Ð°Ð½ Ð¶Ð°Ò£Ð³Ð°Ðº Ñ‚Ð¾Ñ€Ñ‚', desc: 'ÐšÑƒÑƒÑ€ÑƒÐ»Ð³Ð°Ð½ Ð¶Ð°Ò£Ð³Ð°Ðº ÐºÐ¾ÑˆÑƒÐ»Ð³Ð°Ð½ Ð¶ÑƒÐ¼ÑˆÐ°Ðº Ð±Ð°Ð½Ð°Ð½ Ð³ÑƒÐ±ÐºÐ°ÑÑ‹' },
    { id: 'banana-nut-cupcakes', name: 'Ð‘Ð°Ð½Ð°Ð½ Ð¶Ð°Ò£Ð³Ð°Ðº ÐºÐµÐºÑÑ‚ÐµÑ€Ð¸', desc: 'ÐœÐ°Ð¹Ð´Ð°Ð»Ð°Ð½Ð³Ð°Ð½ Ð¶Ð°Ò£Ð³Ð°ÐºÑ‚Ð°Ñ€ â€‹â€‹Ð¼ÐµÐ½ÐµÐ½ Ñ‚Ð¾Ð»Ñ‚ÑƒÑ€ÑƒÐ»Ð³Ð°Ð½ Ð¼Ð¸Ð½Ð¸ Ð±Ð°Ð½Ð°Ð½ Ñ‚Ð¾Ñ€Ñ‚Ñ‚Ð¾Ñ€Ñƒ' }
  ]
};

let currentLang = 'en';

function changeLanguage(lang) {
  currentLang = lang;
  document.querySelectorAll('[data-key]').forEach(elem => {
    const key = elem.getAttribute('data-key');
    if (translations[lang][key]) {
      elem.textContent = translations[lang][key];
    }
  });
  renderTreats();
  populateTreatsDropdown();
}

function renderTreats() {
    const carousel = document.querySelector('.carousel');
    carousel.innerHTML = ''; // Grid container now, not scrollable flex
  const currentTreats = treats.en.map((treat, index) => ({
    ...treat,
    name: treats[currentLang][index].name,
    desc: treats[currentLang][index].desc,
  }));

  currentTreats.forEach(treat => {
    const card = `
      <div class="bg-white rounded-lg shadow-md p-4 text-center flex flex-col justify-between h-80 transition hover:scale-105">
        <img src="${treat.img}" alt="${treat.name}" class="w-32 h-32 object-cover mx-auto rounded-full mb-4 border-4 border-purple-100" />
        <h3 class="font-bold text-md mb-1">${treat.name}</h3>
        <p class="text-xs text-gray-500 mb-4 h-10">${treat.desc}</p>
        <div class="mt-auto">
          <button class="bg-copper text-white text-sm font-bold py-1 px-4 rounded-full w-full hover:bg-opacity-90" onclick="openOrderModal('${treat.id}')" data-key="order_button">${translations[currentLang].order_button}</button>
        </div>
      </div>
    `;
    carousel.innerHTML += card;
  });
}

function populateTreatsDropdown() {
  const select = document.getElementById('treat-selection');
  select.innerHTML = '';
  const currentTreats = treats.en.map((treat, index) => ({
    id: treat.id,
    name: treats[currentLang][index].name
  }));
  currentTreats.forEach(treat => {
    const option = document.createElement('option');
    option.value = treat.id;
    option.textContent = treat.name;
    select.appendChild(option);
  });
}

function openOrderModal(treatId = null) {
  const modal = document.getElementById('orderModal');
  const form = document.getElementById('orderForm');
  if (treatId) form.elements['treat'].value = treatId;
  modal.classList.remove('opacity-0', 'pointer-events-none');
  modal.querySelector('div').classList.remove('scale-95');
}

function closeOrderModal() {
  const modal = document.getElementById('orderModal');
  modal.classList.add('opacity-0');
  setTimeout(() => {
    modal.classList.add('pointer-events-none');
    modal.querySelector('div').classList.add('scale-95');
  }, 200);
}


function getTreatNameById(id) {
  const index = treats.en.findIndex(t => t.id === id);
  return index !== -1 ? treats[currentLang][index].name : 'Unknown Treat';
}

document.getElementById('orderForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const formData = new FormData(this);
  //const phoneNumber = '996503110629';
  const phoneNumber = '996550346970';
  const treatId = formData.get('treat');
  const treatName = getTreatNameById(treatId);
  const quantity = formData.get('quantity');
  const pickupDate = formData.get('date');
  const name = formData.get('name');
  const note = formData.get('note');

  const t = translations[currentLang];

  let message = `${t.whatsapp_greeting}\nðŸ§ ${treatName}\n${t.whatsapp_qty}: ${quantity}\n${t.whatsapp_pickup}: ${pickupDate}\n${t.whatsapp_name}: ${name}`;
  if (note) message += `\n${t.whatsapp_note}: ${note}`;

  const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
  window.open(whatsappUrl, '_blank');
  closeOrderModal();
});

document.addEventListener('DOMContentLoaded', () => {
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('pickup-date').setAttribute('min', today);
  changeLanguage('en');
});
